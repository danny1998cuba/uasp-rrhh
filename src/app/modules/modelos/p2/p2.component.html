<app-title-banner title="Plantilla de cargo y registro de trabajadores" image_src="assets/images/models_banner.png">
</app-title-banner>

<div class="card-body">
    <div class="d-flex justify-content-between">
        <mat-form-field>
            <mat-label>Seleccione una unidad</mat-label>
            <mat-select #select [(value)]="unidad" [compareWith]="compareObjects" (valueChange)="changedUni()">
                <mat-select-filter [array]="unidades" [displayMember]="'nombre'" (filteredReturn)="filtered = $event"
                    placeholder="Buscar..." *ngIf="select.focused" [showSpinner]="true"
                    noResultsMessage="Sin coincidencias">
                </mat-select-filter>
                <mat-option [value]="null">--</mat-option>
                <mat-option *ngFor="let uni of filtered" [value]="uni">
                    {{uni.nombre}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <ng-container *ngIf="!isLoading; else noData;">
        <ng-container *ngIf="file != ''; else noFile">
            <app-pdf-viewer [src]="file" [downloadFileName]="'P2 - ' + unidad?.nombre + '.pdf'"></app-pdf-viewer>
        </ng-container>
    </ng-container>
</div>

<ng-template #noData>
    <app-loader></app-loader>
</ng-template>

<ng-template #noFile>
    <small class="text-danger">
        Debe seleccionar una unidad
    </small>
</ng-template>